{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Structured Book Content with Editor IDs",
  "description": "Schema for book content with unique IDs for custom editor integration",
  "type": "object",
  "properties": {
    "book": {
      "type": "object",
      "properties": {
        "id": {"type": "string", "pattern": "^book_\\d+$"},
        "created": {"type": "string", "format": "date-time"},
        "source": {"type": "string"},
        "metadata": {
          "type": "object",
          "properties": {
            "title": {"type": "string"},
            "subtitle": {"type": "string"},
            "format": {"type": "string"},
            "version": {"type": "string"}
          }
        },
        "chapters": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string", "pattern": "^ch_\\d{3}_[a-f0-9]{8}$"},
              "number": {"type": "string"},
              "title": {"type": "string"},
              "content_blocks": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {"type": "string", "pattern": "^blk_\\d{3}_\\d{5}_[a-f0-9]{8}$"},
                    "type": {"enum": ["paragraph", "chapter_title", "section_title", "callout_text", "callout_header", "list", "list_item"]},
                    "content": {"type": "string"},
                    "attributes": {
                      "type": "object",
                      "properties": {
                        "original_class": {"type": "string"},
                        "content_type": {"type": "string"},
                        "paragraph_type": {"enum": ["first", "body", "opening"]},
                        "style": {"enum": ["italic", "bold", "normal"]},
                        "emphasis": {"enum": ["high", "medium", "low"]},
                        "layout": {"enum": ["callout", "main", "sidebar"]},
                        "hierarchy": {"enum": ["1", "2", "3", "4"]},
                        "drop_cap": {"type": "boolean"},
                        "indent": {"enum": ["none", "standard", "hanging"]},
                        "list_type": {"enum": ["bullet", "numbered", "definition"]}
                      }
                    }
                  },
                  "required": ["id", "type", "content"]
                }
              }
            },
            "required": ["id", "number", "title"]
          }
        }
      },
      "required": ["id", "created", "metadata", "chapters"]
    }
  }
}